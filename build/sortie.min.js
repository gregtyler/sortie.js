/*!
 * Sortie.js v0.2.0
 * An inoffensive table sorter for developers
 */
!function(t,r){"function"==typeof define&&define.amd?define([],r):"object"==typeof module&&module.exports?module.exports=r():t.Sortie=r()}(this,function t(){"use strict";function r(t){return t.split("").reverse().join("")}function e(t,r){var e={};return"undefined"==typeof r&&(r="yyyy-mm-dd"),r.replace(/(dd|mm|yyyy|hh|ii)/g,function(r,n,i){e[n]=t.substr(i,n.length)}),new Date(e.yyyy||0,e.mm-1||0,e.dd||1,e.hh||0,e.ii||0,e.ss||0)}function n(t){return t.textContent}function i(t,r){function e(){var t=d.data(),e={};for(var n in t)if("sortie"===n.substr(0,6)&&n.length>6){var i=n.toLowerCase().replace(/-/g,"");e[i.substr(6)]=t[n]}return $.extend(!0,{},c,r,e)}function n(){r=e();var t=r.sort||d.attr("data-sortie");t=t.split("|"),t.length>l.length&&console.error("Sortie config error: Too many sort columns specified"),d.attr({"aria-atomic":!0,"aria-live":"polite","aria-relevant":"all"}),d.attr("id")||d.attr("id","sortieTable"+1*new Date);for(var n in t)if(t[n]){var s=$("<button />").css({backgroundColor:"transparent",border:"none"}).html(r.markers.unsorted);s.attr({type:"button","aria-controls":d.attr("id")}),l.eq(n).css({whiteSpace:"nowrap",cursor:"pointer"}).click(i(n)).data({sortie:!0,sortieCompareFunction:a(n,t[n]),sortieButton:s}).append(" ",s)}if(r.initialsort!==!1){var c={};if("D"===r.initialsort.toString().substr(-1,1))c.dir="DESC";else if("A"===r.initialsort.toString().substr(-1,1))c.dir="ASC";else if("-1"===r.initialsort.toString())for(var u=0,f=t.length;f>u;u++)if(t[u]){r.initialsort=u;break}o(r.initialsort,c)}}function i(t){return function(){o(t)}}function o(t,e){t=parseInt(t,10);var e=$.extend({},e),n=l.eq(t),i=n.data("sortieButton"),o=Array.prototype.slice.call(f.find("tr").get(),0),a="undefined"!=typeof e.dir?e.dir:"ASC";s===t&&"ASC"===n.data("sortieDirection")&&"undefined"==typeof e.dir&&(a="DESC"),s=t,n.data("sortieDirection",a),n.attr("aria-sort",a.toLowerCase()+"ending"),o.sort(n.data("sortieCompareFunction")),"DESC"===a?(i.html(r.markers.desc),o=o.reverse()):i.html(r.markers.asc),l.not(n).each(function(t,e){var n=$(e);n.removeAttr("aria-sort"),n.data("sortie")&&n.data("sortieButton").html(r.markers.unsorted)});var c=document.createDocumentFragment(),u=f.get(0);for(var p in o)c.appendChild(o[p]);u.innerHTML="",u.appendChild(c),d.trigger("sortie:sorted")}function a(t,r){var e=r.split(":"),n=e[0],i=e[1]?e[1].split(","):[],o=u[n];if("function"!=typeof o){console.error('Sortie error: comparison function not found for rule "'+n+'"');var o=function(){return 0}}return function(e,n){var a=e.children[t],s=n.children[t],c=o.call(window,a,s,i);return"r"===r.substr(1,1)?-c:c}}var s,d=$(t),f=d.find("tbody").eq(0),l=d.find("thead th");n();var p={sort:o};return d.data("mySortieInstance",p),p}function o(t,r){return new i(t,r)}function a(t,r){"string"==typeof t&&(t=[t]);for(var e=0,n=t.length;n>e;e++)u[t[e]]=r}function s(r,e){return"undefined"==typeof r&&(r=window.jQuery),"undefined"==typeof e&&(e="sortie"),"function"!=typeof r||"string"!=typeof $().jquery?(console.error("Invalid jQuery object supplied"),!1):void(r.fn[e]=function(r){var e=Array.prototype.slice.apply(arguments);return $(this).each(function(){if("string"==typeof r){var n=r;$(this).data("mySortieInstance")[n](e.slice(1))}else if(!$(this).data("mySortieInstance")){var i=new t;i.create(this,r)}})})}var c={initialsort:-1,markers:{asc:"&#8595;",desc:"&#8593;",unsorted:"&#8597;"}},u={};if(Object.defineProperty&&Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(Element.prototype,"textContent")&&!Object.getOwnPropertyDescriptor(Element.prototype,"textContent").get){var d=Object.getOwnPropertyDescriptor(Element.prototype,"innerText");Object.defineProperty(Element.prototype,"textContent",{get:function(){return d.get.call(this)},set:function(t){return d.set.call(this,t)}})}return a(["a","alpha"],function(t,e){var i=n(t).trim(),o=n(e).trim();return"rtl"===t.dir&&(i=r(i)),"rtl"===e.dir&&(o=r(o)),i.localeCompare(o)}),a(["d","date"],function(t,r,i){var o=i[0],a=e(n(t),o),s=e(n(r),o);return a>s?1:a>s?-1:0}),a(["i","int"],function(t,r){var e=parseInt(n(t),10),i=parseInt(n(r),10);return isNaN(i)?isNaN(e)?0:1:isNaN(e)?-1:e-i}),{attachTojQuery:s,registerComparison:a,create:o}});
//# sourceMappingURL=sortie.min.js.map
