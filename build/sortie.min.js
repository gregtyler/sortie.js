/*!
 * Sortie.js v0.2.0
 * An inoffensive table sorter for developers
 */
!function(t,r){"function"==typeof define&&define.amd?define([],r):"object"==typeof module&&module.exports?module.exports=r():t.Sortie=r()}(this,function(){"use strict";function t(t){return t.split("").reverse().join("")}function r(t,r){var e={};return"undefined"==typeof r&&(r="yyyy-mm-dd"),r.replace(/(dd|mm|yyyy|hh|ii)/g,function(r,n,i){e[n]=t.substr(i,n.length)}),new Date(e.yyyy||0,e.mm-1||0,e.dd||1,e.hh||0,e.ii||0,e.ss||0)}function e(t){return t.textContent||$(t).text()}function n(t,r){function e(){var t=c.data(),e={};for(var n in t)if("sortie"===n.substr(0,6)&&n.length>6){var i=n.toLowerCase().replace(/-/g,"");e[i.substr(6)]=t[n]}return $.extend(!0,{},a,r,e)}function n(){r=e();var t=r.sort||c.attr("data-sortie");t=t.split("|"),t.length>l.length&&console.error("Sortie config error: Too many sort columns specified"),c.attr({"aria-atomic":!0,"aria-live":"polite","aria-relevant":"all"}),c.attr("id")||c.attr("id","sortieTable"+1*new Date);for(var n in t)if(t[n]){var a=$("<button />").css({backgroundColor:"transparent",border:"none"}).html(r.markers.unsorted);a.attr({type:"button","aria-controls":c.attr("id")}),l.eq(n).css({whiteSpace:"nowrap",cursor:"pointer"}).click(i(n)).data({sortie:!0,sortieCompareFunction:d(n,t[n]),sortieButton:a}).append(" ",a)}if(r.initialsort!==!1){var s={};if("D"===r.initialsort.toString().substr(-1,1))s.dir="DESC";else if("A"===r.initialsort.toString().substr(-1,1))s.dir="ASC";else if("-1"===r.initialsort.toString())for(var u=0,f=t.length;f>u;u++)if(t[u]){r.initialsort=u;break}o(r.initialsort,s)}}function i(t){return function(){o(t)}}function o(t,e){t=parseInt(t,10);var e=$.extend({},e),n=l.eq(t),i=n.data("sortieButton"),o=Array.prototype.slice.call(f.find("tr").get(),0),a="undefined"!=typeof e.dir?e.dir:"ASC";u===t&&"ASC"===n.data("sortieDirection")&&"undefined"==typeof e.dir&&(a="DESC"),u=t,n.data("sortieDirection",a),n.attr("aria-sort",a.toLowerCase()+"ending"),o.sort(n.data("sortieCompareFunction")),"DESC"===a?(i.html(r.markers.desc),o=o.reverse()):i.html(r.markers.asc),l.not(n).each(function(t,e){var n=$(e);n.removeAttr("aria-sort"),n.data("sortie")&&n.data("sortieButton").html(r.markers.unsorted)});var s=document.createDocumentFragment(),d=f.get(0);for(var p in o)s.appendChild(o[p]);d.innerHTML="",d.appendChild(s),c.trigger("sortie:sorted")}function d(t,r){var e=r.split(":"),n=e[0],i=e[1]?e[1].split(","):[],o=s[n];if("function"!=typeof o){console.error('Sortie error: comparison function not found for rule "'+n+'"');var o=function(){return 0}}return function(e,n){var a=e.children[t],s=n.children[t],d=o.call(window,a,s,i);return"r"===r.substr(1,1)?-d:d}}var u,c=$(t),f=c.find("tbody").eq(0),l=c.find("thead th");n();var p={sort:o};return c.data("mySortieInstance",p),p}function i(t,r){return new n(t,r)}function o(t,r){"string"==typeof t&&(t=[t]);for(var e=0,n=t.length;n>e;e++)s[t[e]]=r}var a={initialsort:-1,markers:{asc:"&#8595;",desc:"&#8593;",unsorted:"&#8597;"}},s={};return o(["a","alpha"],function(r,n){var i=e(r).trim(),o=e(n).trim();return"rtl"===r.dir&&(i=t(i)),"rtl"===n.dir&&(o=t(o)),i.localeCompare(o)}),o(["d","date"],function(t,n,i){var o=i[0],a=r(e(t),o),s=r(e(n),o);return a>s?1:a>s?-1:0}),o(["i","int"],function(t,r){var n=parseInt(e(t),10),i=parseInt(e(r),10);return isNaN(i)?isNaN(n)?0:1:isNaN(n)?-1:n-i}),{registerComparison:o,create:i}});
//# sourceMappingURL=sortie.min.js.map
