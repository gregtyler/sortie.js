/*!
 * Sortie.js v0.2.0
 * An inoffensive table sorter for developers
 */
!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof module&&module.exports?module.exports=e():t.Sortie=e()}(this,function(){"use strict";function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var r=document.createEvent("CustomEvent");return r.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),r}function e(t){return t.split("").reverse().join("")}function r(t,e){var r={};return"undefined"==typeof e&&(e="yyyy-mm-dd"),e.replace(/(dd|mm|yyyy|hh|ii)/g,function(e,n,o){r[n]=t.substr(o,n.length)}),new Date(r.yyyy||0,r.mm-1||0,r.dd||1,r.hh||0,r.ii||0,r.ss||0)}function n(t){return t.textContent}function o(t,e){function r(){for(var r=t.attributes,n={},o=0,i=r.length;i>o;o++){var a=r[o];if("data-sortie"===a.name.substr(0,11)&&a.name.length>11){var u=a.name.toLowerCase().replace(/-/g,"");n[u.substr(11)]=a.value}}return Object.assign(!0,{},s,e,n)}function n(){e=r();var n;if(n="undefined"!=typeof e.sort?e.sort:t.getAttribute("data-sortie"),null===n)return!1;"string"==typeof n&&(n=n.split("|")),n.length>p.length&&console.error("Sortie config error: Too many sort columns specified"),t.setAttribute("aria-atomic",!0),t.setAttribute("aria-live","polite"),t.setAttribute("aria-relevant","all"),t.getAttribute("id")||t.setAttribute("id","sortieTable"+1*new Date);for(var s in n)if(n[s]){var u=document.createElement("button");u.style.backgroundColor="transparent",u.style.border="none",u.innerHTML=e.markers.unsorted,u.setAttribute("type","button"),u.setAttribute("aria-controls",t.getAttribute("id"));var c=p[s],l=o(s);c.style.whiteSpace="nowrap",c.style.cursor="pointer",c.addEventListener("click",l),c.setAttribute("data-sortie",!0),d.set(c,"sortieCompareFunction",a(s,n[s])),d.set(c,"sortieButton",u),c.appendChild(document.createTextNode(" ")),c.appendChild(u),c.addEventListener("sortie:sort",l)}if(e.initialsort!==!1){var f={};if("D"===e.initialsort.toString().substr(-1,1))f.dir="DESC";else if("A"===e.initialsort.toString().substr(-1,1))f.dir="ASC";else if("-1"===e.initialsort.toString())for(var v=0,b=n.length;b>v;v++)if(n[v]){e.initialsort=v;break}i(e.initialsort,f)}}function o(t){return function(){i(t)}}function i(r,n){r=parseInt(r,10);var n=Object.assign({},n),o=p[r],i=d.get(o,"sortieButton"),a=Array.prototype.slice.call(f.querySelectorAll("tr"),0),s="undefined"!=typeof n.dir?n.dir:"ASC";c===r&&"ASC"===d.get(o,"sortieDirection")&&"undefined"==typeof n.dir&&(s="DESC"),c=r,d.set(o,"sortieDirection",s),o.setAttribute("aria-sort",s.toLowerCase()+"ending"),a.sort(d.get(o,"sortieCompareFunction")),"DESC"===s?(i.innerHTML=e.markers.desc,a=a.reverse()):i.innerHTML=e.markers.asc;for(var u=0,v=p.length;v>u;u++){var b=p[u];b!==o&&(b.removeAttribute("aria-sort"),b.getAttribute("data-sortie")&&(d.get(b,"sortieButton").innerHTML=e.markers.unsorted))}var y=document.createDocumentFragment();for(var u in a)y.appendChild(a[u]);t.dispatchEvent(l.afterSorted),f.innerHTML="",f.appendChild(y)}function a(t,e){var r=e.split(":"),n=r[0],o=r[1]?r[1].split(","):[],i=u[n];if("function"!=typeof i){console.error('Sortie error: comparison function not found for rule "'+n+'"');var i=function(){return 0}}return function(r,n){var a=r.children[t],s=n.children[t],u=i.call(window,a,s,o);return"r"===e.substr(1,1)?-u:u}}var c,f=t.querySelector("tbody"),p=t.querySelectorAll("thead th");return n(),{sort:i}}function i(t,e){return new o(t,e)}function a(t,e){"string"==typeof t&&(t=[t]);for(var r=0,n=t.length;n>r;r++)u[t[r]]=e}var s={initialsort:-1,markers:{asc:"&#8595;",desc:"&#8593;",unsorted:"&#8597;"}},u={};if("function"!=typeof Object.assign&&(Object.assign=function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),r=1;r<arguments.length;r++){var n=arguments[r];if(void 0!==n&&null!==n)for(var o in n)n.hasOwnProperty(o)&&(e[o]=n[o])}return e}),Object.defineProperty&&Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(Element.prototype,"textContent")&&!Object.getOwnPropertyDescriptor(Element.prototype,"textContent").get){var c=Object.getOwnPropertyDescriptor(Element.prototype,"innerText");Object.defineProperty(Element.prototype,"textContent",{get:function(){return c.get.call(this)},set:function(t){return c.set.call(this,t)}})}"function"==typeof window.CustomEvent&&(t.prototype=window.Event.prototype,window.CustomEvent=t);var l={sort:new CustomEvent("sortie:sort"),afterSorted:new CustomEvent("sortie:afterSorted")},d=function(){function t(t){for(var e=0,r=n.length;r>e;e++)if(n[e].__obj===t)return e;return n.push({__obj:t}),n.length-1}function e(e,r){var o=t(e);return n[o]&&n[o][r]?n[o][r]:null}function r(e,r,o){var i=t(e);"undefined"==typeof n[i]&&(n[i]={}),n[i][r]=o}var n=[];return{get:e,set:r}}();return a(["a","alpha"],function(t,r){var o=n(t).trim(),i=n(r).trim();return"rtl"===t.dir&&(o=e(o)),"rtl"===r.dir&&(i=e(i)),o.localeCompare(i)}),a(["d","date"],function(t,e,o){var i=o[0],a=r(n(t),i),s=r(n(e),i);return a>s?1:s>a?-1:0}),a(["i","int"],function(t,e){var r=parseInt(n(t),10),o=parseInt(n(e),10);return isNaN(o)?isNaN(r)?0:1:isNaN(r)?-1:r-o}),{create:i,events:l,registerComparison:a}});
//# sourceMappingURL=sortie.min.js.map
