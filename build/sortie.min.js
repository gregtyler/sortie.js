/*!
 * Sortie.js v0.2.0
 * An inoffensive table sorter for developers
 */
!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof module&&module.exports?module.exports=e():t.Sortie=e()}(this,function t(){"use strict";function e(t){return t.split("").reverse().join("")}function r(t,e){var r={};return"undefined"==typeof e&&(e="yyyy-mm-dd"),e.replace(/(dd|mm|yyyy|hh|ii)/g,function(e,n,i){r[n]=t.substr(i,n.length)}),new Date(r.yyyy||0,r.mm-1||0,r.dd||1,r.hh||0,r.ii||0,r.ss||0)}function n(t){return t.textContent||$(t).text()}function i(t,e){function r(){for(var r=t.attributes,n={},i=0,o=r.length;o>i;i++){var a=r[i];if("data-sortie"===a.name.substr(0,11)&&a.name.length>11){var s=a.name.toLowerCase().replace(/-/g,"");n[s.substr(11)]=a.value}}return $.extend(!0,{},u,e,n)}function n(){e=r();var n;if(n="undefined"!=typeof e.sort?e.sort:t.getAttribute("data-sortie"),null===n)return!1;"string"==typeof n&&(n=n.split("|")),n.length>p.length&&console.error("Sortie config error: Too many sort columns specified"),t.setAttribute("aria-atomic",!0),t.setAttribute("aria-live","polite"),t.setAttribute("aria-relevant","all"),t.getAttribute("id")||t.setAttribute("id","sortieTable"+1*new Date);for(var s in n)if(n[s]){var u=document.createElement("button");u.style.backgroundColor="transparent",u.style.border="none",u.innerHTML=e.markers.unsorted,u.setAttribute("type","button"),u.setAttribute("aria-controls",t.getAttribute("id"));var l=p[s];l.style.whiteSpace="nowrap",l.style.cursor="pointer",l.addEventListener("click",i(s)),l.setAttribute("data-sortie",!0),d.set(l,"sortieCompareFunction",a(s,n[s])),d.set(l,"sortieButton",u),l.appendChild(document.createTextNode(" ")),l.appendChild(u)}if(e.initialsort!==!1){var c={};if("D"===e.initialsort.toString().substr(-1,1))c.dir="DESC";else if("A"===e.initialsort.toString().substr(-1,1))c.dir="ASC";else if("-1"===e.initialsort.toString())for(var f=0,y=n.length;y>f;f++)if(n[f]){e.initialsort=f;break}o(e.initialsort,c)}}function i(t){return function(){o(t)}}function o(t,r){t=parseInt(t,10);var r=$.extend({},r),n=p[t],i=d.get(n,"sortieButton"),o=Array.prototype.slice.call(f.querySelectorAll("tr"),0),a="undefined"!=typeof r.dir?r.dir:"ASC";s===t&&"ASC"===d.get(n,"sortieDirection")&&"undefined"==typeof r.dir&&(a="DESC"),s=t,d.set(n,"sortieDirection",a),n.setAttribute("aria-sort",a.toLowerCase()+"ending"),o.sort(d.get(n,"sortieCompareFunction")),"DESC"===a?(i.innerHTML=e.markers.desc,o=o.reverse()):i.innerHTML=e.markers.asc;for(var u=0,l=p.length;l>u;u++){var c=p[u];c!==n&&(c.removeAttribute("aria-sort"),c.getAttribute("data-sortie")&&(d.get(c,"sortieButton").innerHTML=e.markers.unsorted))}var y=document.createDocumentFragment();for(var u in o)y.appendChild(o[u]);f.innerHTML="",f.appendChild(y)}function a(t,e){var r=e.split(":"),n=r[0],i=r[1]?r[1].split(","):[],o=l[n];if("function"!=typeof o){console.error('Sortie error: comparison function not found for rule "'+n+'"');var o=function(){return 0}}return function(r,n){var a=r.children[t],s=n.children[t],u=o.call(window,a,s,i);return"r"===e.substr(1,1)?-u:u}}var s,f=t.querySelector("tbody"),p=t.querySelectorAll("thead th");n();var y={sort:o};return null!==c&&c(t).data("mySortieInstance",y),y}function o(t,e){return new i(t,e)}function a(t,e){"string"==typeof t&&(t=[t]);for(var r=0,n=t.length;n>r;r++)l[t[r]]=e}function s(e,r){return"undefined"==typeof e&&(e=window.jQuery),"undefined"==typeof r&&(r="sortie"),"function"!=typeof e||"string"!=typeof $().jquery?(console.error("Invalid jQuery object supplied"),!1):(c=e,void(e.fn[r]=function(e){var r=Array.prototype.slice.apply(arguments);return $(this).each(function(){if("string"==typeof e){var n=e;$(this).data("mySortieInstance")[n](r.slice(1))}else if(!$(this).data("mySortieInstance")){var i=new t;i.create(this,e)}})}))}var u={initialsort:-1,markers:{asc:"&#8595;",desc:"&#8593;",unsorted:"&#8597;"}},l={},c=null,d=function(){function t(t){for(var e=0,r=n.length;r>e;e++)if(n[e].__obj===t)return e;return n.push({__obj:t}),n.length-1}function e(e,r){var i=t(e);return n[i]&&n[i][r]?n[i][r]:null}function r(e,r,i){var o=t(e);"undefined"==typeof n[o]&&(n[o]={}),n[o][r]=i}var n=[];return{get:e,set:r}}();return a(["a","alpha"],function(t,r){var i=n(t).trim(),o=n(r).trim();return"rtl"===t.dir&&(i=e(i)),"rtl"===r.dir&&(o=e(o)),i.localeCompare(o)}),a(["d","date"],function(t,e,i){var o=i[0],a=r(n(t),o),s=r(n(e),o);return a>s?1:a>s?-1:0}),a(["i","int"],function(t,e){var r=parseInt(n(t),10),i=parseInt(n(e),10);return isNaN(i)?isNaN(r)?0:1:isNaN(r)?-1:r-i}),{attachTojQuery:s,registerComparison:a,create:o}});
//# sourceMappingURL=sortie.min.js.map
