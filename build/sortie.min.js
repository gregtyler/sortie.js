/*!
 * Sortie.js v0.1.0
 * An inoffensive table sorter for developers
 */
function Sortie(t,r){"use strict";function e(){var t=h.data(),e={};for(var i in t)if("sortie"===i.substr(0,6)&&i.length>6){var n=i.toLowerCase().replace(/-/g,"");e[n.substr(6)]=t[i]}return $.extend(!0,{},p,r,e)}function i(t){return t.split("").reverse().join("")}function n(t,r){var e={};return"undefined"==typeof r&&(r="yyyy-mm-dd"),r.replace(/(dd|mm|yyyy|hh|ii)/g,function(r,i,n){e[i]=t.substr(n,i.length)}),new Date(e.yyyy||0,e.mm-1||0,e.dd||1,e.hh||0,e.ii||0,e.ss||0)}function a(t){return t.textContent||$(t).text()}function o(){r=e();var t=r.sort||h.attr("data-sortie");t=t.split(","),t.length>y.length&&console.error("Sortie config error: Too many sort columns specified"),h.attr({"aria-atomic":!0,"aria-live":"polite","aria-relevant":"all"}),h.attr("id")||h.attr("id","sortieTable"+1*new Date);for(var i in t)if(t[i]){var n=$("<button />").css({backgroundColor:"transparent",border:"none"}).html(r.markers.unsorted);n.attr("aria-controls",h.attr("id")),y.eq(i).css({whiteSpace:"nowrap",cursor:"pointer"}).click(s(i)).data({sortie:!0,sortieCompareFunction:u(i,t[i]),sortieButton:n}).append(" ",n)}if(r.initialsort!==!1){var a={};if("D"===r.initialsort.toString().substr(-1,1))a.dir="DESC";else if("A"===r.initialsort.toString().substr(-1,1))a.dir="ASC";else if("-1"===r.initialsort.toString())for(var o=0,c=t.length;c>o;o++)if(t[o]){r.initialsort=o;break}d(r.initialsort,a)}}function s(t){return function(){d(t)}}function d(t,e){t=parseInt(t,10);var e=$.extend({},e),i=y.eq(t),n=i.data("sortieButton"),a=Array.prototype.slice.call(v.find("tr").get(),0),o="undefined"!=typeof e.dir?e.dir:"ASC";m===t&&"ASC"===i.data("sortieDirection")&&"undefined"==typeof e.dir&&(o="DESC"),m=t,i.data("sortieDirection",o),i.attr("aria-sort",o.toLowerCase()+"ending"),a.sort(i.data("sortieCompareFunction")),"DESC"===o?(n.html(r.markers.desc),a=a.reverse()):n.html(r.markers.asc),y.not(i).each(function(t,e){var i=$(e);i.removeAttr("aria-sort"),i.data("sortie")&&i.data("sortieButton").html(r.markers.unsorted)});var s=document.createDocumentFragment(),d=v.get(0);for(var u in a)s.appendChild(a[u]);d.innerHTML="",d.appendChild(s),h.trigger("sortie:sorted")}function u(t,r){var e=function(){return 0};return"a"===r.substr(0,1)?e=c:"d"===r.substr(0,1)?e=l:"i"===r.substr(0,1)&&(e=f),function(i,n){var a=i.children[t],o=n.children[t],s=e.call(window,a,o,r);return"r"===r.substr(1,1)?-s:s}}function c(t,r){var e=a(t).trim(),n=a(r).trim();return"rtl"===t.dir&&(e=i(e)),"rtl"===r.dir&&(n=i(n)),e.localeCompare(n)}function l(t,r,e){var i=e.substr(2),o=n(a(t),i),s=n(a(r),i);return o>s?1:o>s?-1:0}function f(t,r){var e=parseInt(a(t),10),i=parseInt(a(r),10);return isNaN(i)?isNaN(e)?0:1:isNaN(e)?-1:e-i}var m,r,p={initialsort:-1,markers:{asc:"&#8595;",desc:"&#8593;",unsorted:"&#8597;"}},h=$(t),v=h.find("tbody").eq(0),y=h.find("thead th");o()}$.fn.sortie=function(t){$(this).each(function(){Sortie(this,t)})};