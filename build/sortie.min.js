/*!
 * Sortie.js v0.2.0
 * An inoffensive table sorter for developers
 */
!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof module&&module.exports?module.exports=e():t.Sortie=e()}(this,function(){"use strict";function t(t){return t.split("").reverse().join("")}function e(t,e){var r={};return"undefined"==typeof e&&(e="yyyy-mm-dd"),e.replace(/(dd|mm|yyyy|hh|ii)/g,function(e,n,i){r[n]=t.substr(i,n.length)}),new Date(r.yyyy||0,r.mm-1||0,r.dd||1,r.hh||0,r.ii||0,r.ss||0)}function r(t){return t.textContent}function n(t,e){function r(){for(var r=t.attributes,n={},i=0,o=r.length;o>i;i++){var s=r[i];if("data-sortie"===s.name.substr(0,11)&&s.name.length>11){var u=s.name.toLowerCase().replace(/-/g,"");n[u.substr(11)]=s.value}}return Object.assign(!0,{},a,e,n)}function n(){e=r();var n;if(n="undefined"!=typeof e.sort?e.sort:t.getAttribute("data-sortie"),null===n)return!1;"string"==typeof n&&(n=n.split("|")),n.length>d.length&&console.error("Sortie config error: Too many sort columns specified"),t.setAttribute("aria-atomic",!0),t.setAttribute("aria-live","polite"),t.setAttribute("aria-relevant","all"),t.getAttribute("id")||t.setAttribute("id","sortieTable"+1*new Date);for(var a in n)if(n[a]){var s=document.createElement("button");s.style.backgroundColor="transparent",s.style.border="none",s.innerHTML=e.markers.unsorted,s.setAttribute("type","button"),s.setAttribute("aria-controls",t.getAttribute("id"));var l=d[a];l.style.whiteSpace="nowrap",l.style.cursor="pointer",l.addEventListener("click",i(a)),l.setAttribute("data-sortie",!0),c.set(l,"sortieCompareFunction",u(a,n[a])),c.set(l,"sortieButton",s),l.appendChild(document.createTextNode(" ")),l.appendChild(s)}if(e.initialsort!==!1){var f={};if("D"===e.initialsort.toString().substr(-1,1))f.dir="DESC";else if("A"===e.initialsort.toString().substr(-1,1))f.dir="ASC";else if("-1"===e.initialsort.toString())for(var p=0,y=n.length;y>p;p++)if(n[p]){e.initialsort=p;break}o(e.initialsort,f)}}function i(t){return function(){o(t)}}function o(t,r){t=parseInt(t,10);var r=Object.assign({},r),n=d[t],i=c.get(n,"sortieButton"),o=Array.prototype.slice.call(f.querySelectorAll("tr"),0),a="undefined"!=typeof r.dir?r.dir:"ASC";l===t&&"ASC"===c.get(n,"sortieDirection")&&"undefined"==typeof r.dir&&(a="DESC"),l=t,c.set(n,"sortieDirection",a),n.setAttribute("aria-sort",a.toLowerCase()+"ending"),o.sort(c.get(n,"sortieCompareFunction")),"DESC"===a?(i.innerHTML=e.markers.desc,o=o.reverse()):i.innerHTML=e.markers.asc;for(var s=0,u=d.length;u>s;s++){var p=d[s];p!==n&&(p.removeAttribute("aria-sort"),p.getAttribute("data-sortie")&&(c.get(p,"sortieButton").innerHTML=e.markers.unsorted))}var y=document.createDocumentFragment();for(var s in o)y.appendChild(o[s]);f.innerHTML="",f.appendChild(y)}function u(t,e){var r=e.split(":"),n=r[0],i=r[1]?r[1].split(","):[],o=s[n];if("function"!=typeof o){console.error('Sortie error: comparison function not found for rule "'+n+'"');var o=function(){return 0}}return function(r,n){var a=r.children[t],s=n.children[t],u=o.call(window,a,s,i);return"r"===e.substr(1,1)?-u:u}}var l,f=t.querySelector("tbody"),d=t.querySelectorAll("thead th");return n(),{sort:o}}function i(t,e){return new n(t,e)}function o(t,e){"string"==typeof t&&(t=[t]);for(var r=0,n=t.length;n>r;r++)s[t[r]]=e}var a={initialsort:-1,markers:{asc:"&#8595;",desc:"&#8593;",unsorted:"&#8597;"}},s={};if("function"!=typeof Object.assign&&(Object.assign=function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),r=1;r<arguments.length;r++){var n=arguments[r];if(void 0!==n&&null!==n)for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])}return e}),Object.defineProperty&&Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(Element.prototype,"textContent")&&!Object.getOwnPropertyDescriptor(Element.prototype,"textContent").get){var u=Object.getOwnPropertyDescriptor(Element.prototype,"innerText");Object.defineProperty(Element.prototype,"textContent",{get:function(){return u.get.call(this)},set:function(t){return u.set.call(this,t)}})}var c=function(){function t(t){for(var e=0,r=n.length;r>e;e++)if(n[e].__obj===t)return e;return n.push({__obj:t}),n.length-1}function e(e,r){var i=t(e);return n[i]&&n[i][r]?n[i][r]:null}function r(e,r,i){var o=t(e);"undefined"==typeof n[o]&&(n[o]={}),n[o][r]=i}var n=[];return{get:e,set:r}}();return o(["a","alpha"],function(e,n){var i=r(e).trim(),o=r(n).trim();return"rtl"===e.dir&&(i=t(i)),"rtl"===n.dir&&(o=t(o)),i.localeCompare(o)}),o(["d","date"],function(t,n,i){var o=i[0],a=e(r(t),o),s=e(r(n),o);return a>s?1:a>s?-1:0}),o(["i","int"],function(t,e){var n=parseInt(r(t),10),i=parseInt(r(e),10);return isNaN(i)?isNaN(n)?0:1:isNaN(n)?-1:n-i}),{registerComparison:o,create:i}});
//# sourceMappingURL=sortie.min.js.map
